Here's a minimal version of your script without comments or extra prints:

```python
import requests
import json
import sys
import os
import argparse
from msal import ConfidentialClientApplication

def get_access_token():
    tenant_id = os.environ.get('AZURE_TENANT_ID')
    client_id = os.environ.get('AZURE_CLIENT_ID')
    client_secret = os.environ.get('AZURE_CLIENT_SECRET')
    
    if not all([tenant_id, client_id, client_secret]):
        sys.exit(1)
    
    app = ConfidentialClientApplication(
        client_id=client_id,
        client_credential=client_secret,
        authority=f"https://login.microsoftonline.com/{tenant_id}"
    )
    
    result = app.acquire_token_for_client(scopes=['https://graph.microsoft.com/.default'])
    
    if 'access_token' not in result:
        sys.exit(1)
    
    return result['access_token']

def make_graph_request(endpoint, token, method='GET', data=None, params=None):
    headers = {
        'Authorization': f'Bearer {token}',
        'Content-Type': 'application/json'
    }
    
    url = f'https://graph.microsoft.com/v1.0/{endpoint}'
    
    try:
        if method == 'GET':
            response = requests.get(url, headers=headers, params=params)
        elif method == 'POST':
            response = requests.post(url, headers=headers, json=data)
        
        response.raise_for_status()
        
        if response.status_code == 204:
            return {}
        
        return response.json()
    except requests.exceptions.RequestException as e:
        sys.exit(1)

def get_service_principals_by_names(app_names, token):
    matching_apps = []
    
    for app_name in app_names:
        params = {
            '$select': 'displayName,id,appRoles',
            '$filter': f"displayName eq '{app_name}'"
        }
        
        response = make_graph_request('servicePrincipals', token, params=params)
        
        if 'value' in response and response['value']:
            matching_apps.extend(response['value'])
    
    return matching_apps

def list_available_apps(token, prefix=None):
    params = {
        '$select': 'displayName',
        '$top': 100
    }
    
    if prefix:
        params['$filter'] = f"startsWith(displayName, '{prefix}')"
    
    response = make_graph_request('servicePrincipals', token, params=params)
    
    if 'value' in response:
        app_names = [app['displayName'] for app in response['value']]
        app_names.sort()
        return app_names
    
    return []

def get_existing_app_role_assignments(group_id, token):
    endpoint = f'groups/{group_id}/appRoleAssignments'
    return make_graph_request(endpoint, token)

def check_if_assignment_exists(group_id, role_id, resource_id, token):
    assignments = get_existing_app_role_assignments(group_id, token).get('value', [])
    
    for assignment in assignments:
        if (assignment.get('appRoleId') == role_id and assignment.get('resourceId') == resource_id):
            return True
    
    return False

def create_app_role_assignment(group_id, role_id, resource_id, token):
    if check_if_assignment_exists(group_id, role_id, resource_id, token):
        return {"status": "skipped"}
    
    endpoint = f'groups/{group_id}/appRoleAssignments'
    
    data = {
        "principalId": group_id,
        "resourceId": resource_id,
        "appRoleId": role_id
    }
    
    try:
        return make_graph_request(endpoint, token, method='POST', data=data)
    except Exception:
        return None

def get_group_id(group_name, token):
    params = {
        '$filter': f"displayName eq '{group_name}'",
        '$select': 'id'
    }
    
    response = make_graph_request('groups', token, params=params)
    
    if not response.get('value'):
        return None
    
    return response['value'][0]['id']

def process_group_config_file(filename):
    try:
        with open(filename, 'r') as f:
            content = f.read()
        lines = content.split("\n")
        filtered_lines = [line for line in lines if line.strip() != ""]
        group_names = [line.replace("read", "").replace("write", "").strip() for line in filtered_lines]
            
    except FileNotFoundError:
        sys.exit(1)
    
    if not group_names:
        sys.exit(1)
        
    return group_names

def get_user_input_app_names():
    app_names = []
    while True:
        line = input()
        if not line:
            break
        app_names.append(line.strip())
    
    return app_names

def main():
    parser = argparse.ArgumentParser(description='Assign Azure AD app roles to groups')
    parser.add_argument('--apps', nargs='+', help='Space-separated list of app names to process')
    parser.add_argument('--list', action='store_true', help='List available applications')
    parser.add_argument('--prefix', help='When listing apps, filter by this prefix')
    parser.add_argument('--groups-file', default='groups.config', help='Path to the groups config file (default: groups.config)')
    args = parser.parse_args()
    
    token = get_access_token()
    
    if args.list:
        apps = list_available_apps(token, args.prefix)
        if apps:
            for i, app in enumerate(apps, 1):
                print(f"  {i}. {app}")
        sys.exit(0)
    
    app_names = args.apps if args.apps else get_user_input_app_names()
    
    if not app_names:
        sys.exit(1)
    
    apps = get_service_principals_by_names(app_names, token)
    
    if not apps:
        sys.exit(0)
    
    group_names = process_group_config_file(args.groups_file)
    
    group_ids = {}
    for name in group_names:
        group_id = get_group_id(name, token)
        if group_id:
            group_ids[name] = group_id
    
    if not group_ids:
        sys.exit(1)
    
    for app in apps:
        app_name = app['displayName']
        sp_id = app['id']
        app_roles = app.get('appRoles', [])
        
        if not app_roles:
            continue
        
        first_role_id = app_roles[0]['id']
        
        for group_name, group_id in group_ids.items():
            create_app_role_assignment(group_id, first_role_id, sp_id, token)

if __name__ == "__main__":
    main()
```
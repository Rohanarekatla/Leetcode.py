# Assign ALL groups to EACH app
resource "azuread_app_role_assignment" "assign_all_groups_to_apps" {
  for_each = { for app_id in local.app_ids_list : app_id => app_id if can(app_id) }

  principal_object_id = [for group in data.azuread_group.groups : group.object_id] # Assign all groups
  app_role_id        = each.value
}